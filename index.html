<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
<title>Target Tag</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: linear-gradient(180deg, #ffcf00, #ff5e62);
    font-family: 'Arial Rounded MT Bold', sans-serif;
    overflow: hidden;
  }
  #app {
    height: 100%;
    display: flex;
    flex-direction: column;
  }
  .screen {
    flex: 1;
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .screen.active {
    display: flex;
  }
  .title {
    text-align: center;
    color: white;
    text-shadow: 2px 2px rgba(0,0,0,0.4);
  }
  .btn {
    background: linear-gradient(135deg, #ff7e5f, #feb47b);
    border: none;
    border-radius: 12px;
    padding: 12px 24px;
    margin: 8px 0;
    font-size: 18px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    transition: transform 0.1s ease;
  }
  .btn:active {
    transform: scale(0.96);
  }
  #gameArea {
    position: relative;
    flex: 1;
    width: 100%;
    background: radial-gradient(circle at center, #0072ff, #004c99);
    overflow: hidden;
  }
  .target {
    position: absolute;
    width: 70px;
    height: 70px;
    border-radius: 50%;
    background: radial-gradient(circle, white 0%, red 40%, white 60%, red 80%);
    box-shadow: 0 4px 8px rgba(0,0,0,0.4);
    cursor: pointer;
  }
  .hud {
    position: absolute;
    top: 10px;
    left: 10px;
    color: white;
    font-size: 16px;
    background: rgba(0,0,0,0.4);
    padding: 6px 10px;
    border-radius: 8px;
  }
  .navBar {
    height: 60px;
    background: #222;
    display: flex;
    justify-content: space-around;
    align-items: center;
    color: white;
  }
  .navBtn {
    flex: 1;
    text-align: center;
    cursor: pointer;
    padding: 8px;
  }
  .popup {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
    display: none;
  }
  .popup.active {
    display: block;
  }
</style>
</head>
<body>
<div id="app">
  <div id="home" class="screen active">
    <h1 class="title">ðŸŽ¯ Target Tag</h1>
    <button class="btn" id="playBtn">Play</button>
  </div>
  <div id="shop" class="screen">
    <h1 class="title">Shop</h1>
  </div>
  <div id="locker" class="screen">
    <h1 class="title">Locker</h1>
  </div>
  <div id="game" class="screen">
    <div id="gameArea">
      <div class="hud" id="hud">Score: 0 | Time: 0</div>
    </div>
    <div class="popup" id="endPopup"></div>
  </div>
  <div class="navBar">
    <div class="navBtn" data-screen="home">Home</div>
    <div class="navBtn" data-screen="shop">Shop</div>
    <div class="navBtn" data-screen="locker">Locker</div>
  </div>
</div>
<script>
  let score=0,timeLeft=0,clickTimes=[],coins=0;
  if(localStorage.getItem('coins')) coins=parseInt(localStorage.getItem('coins'));
  const screens=document.querySelectorAll('.screen');
  document.querySelectorAll('.navBtn').forEach(btn=>{
    btn.addEventListener('click',()=>{
      showScreen(btn.dataset.screen);
    });
  });
  function showScreen(id){
    screens.forEach(s=>s.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }
  document.getElementById('playBtn').addEventListener('click',()=>{
    score=0;clickTimes=[];timeLeft=20;
    showScreen('game');
    startGame();
  });
  function startGame(){
    const hud=document.getElementById('hud');
    const gameArea=document.getElementById('gameArea');
    gameArea.innerHTML='<div class="hud" id="hud">Score: 0 | Time: '+timeLeft+'</div>';
    let spawn=setInterval(()=>{
      if(timeLeft<=0){clearInterval(spawn);endRound();return;}
      let t=document.createElement('div');
      t.className='target';
      t.style.left=Math.random()*(gameArea.clientWidth-70)+'px';
      t.style.top=Math.random()*(gameArea.clientHeight-70)+'px';
      t.addEventListener('click',()=>{
        score+=10;
        clickTimes.push(Date.now());
        hud.textContent='Score: '+score+' | Time: '+timeLeft;
        t.remove();
      });
      gameArea.appendChild(t);
      setTimeout(()=>t.remove(),1000);
    },800);
    let timer=setInterval(()=>{
      timeLeft--;
      hud.textContent='Score: '+score+' | Time: '+timeLeft;
      if(timeLeft<=0) clearInterval(timer);
    },1000);
  }
  function endRound(){
    let avgClick='N/A';
    if(clickTimes.length>1){
      let diffs=[];
      for(let i=1;i<clickTimes.length;i++) diffs.push(clickTimes[i]-clickTimes[i-1]);
      avgClick=(diffs.reduce((a,b)=>a+b,0)/diffs.length/1000).toFixed(2)+'s';
    }
    let earned=Math.floor(score/10);
    coins+=earned;
    localStorage.setItem('coins',coins);
    const popup=document.getElementById('endPopup');
    popup.innerHTML=`<h2>Round Over!</h2><p>Score: ${score}</p><p>Avg Time: ${avgClick}</p><p>Coins Earned: ${earned}</p><button class='btn' onclick='showScreen("home");document.getElementById("endPopup").classList.remove("active")'>OK</button>`;
    popup.classList.add('active');
  }
</script>
</body>
</html>

